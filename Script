#NoEnv ; Recommended for performance and compatibility with future AutoHotkey releases.
; #Warn ; Enable warnings to assist with detecting common errors.
SendMode Input ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir% ; Ensures a consistent starting directory.
 
^5::ExitApp ; Ctrl + 5 = Termine l'application
^4::Reload ; Ctrl + 4 = Remet à 0 le script
!p:: ; ALT + P = Commence la detection de pêche
 
 
Durability = 10
durabilityMax = 900
 
MyNumber = 0
Fishing = 0
Random, tirer, 800, 950 ; Variable tirer aléatoirement entre 400 et 600ms
Random, tempsPause, 1, 20 ; Variable tempsPause aléatoirement entre 50 et 100ms
pause := tirer + tempsPause ; Pause et le temps de pause entre chaque reeling
iTirer = 0;
iPause = 0;
isTiring = 0
isPausing = 0
Looping = 0
Begining = 0
 
MsgBox Lancé
While (Begining = 0)
{
    Fishing := 0
    if(Durability = 0)
    {
        Send {Tab}
        Sleep,3000
        MouseMove, 870, 659
        Sleep, 1000
        Send {lbutton down}
        Sleep, 200
        Send {lbutton up}
        Sleep, 2000
        MouseMove, 961, 675
        Sleep, 1000
        Send {lbutton down}
        Sleep, 200
        Send {lbutton up}
        MouseMove, 1003, 577
        Sleep, 1000
        Send {lbutton down}
        Sleep, 200
        Send {lbutton up}
        Sleep, 200
        Send {Tab}
        Durability = durabilityMax
        Sleep, 2000
        Send {F3}
        Sleep, 2000
        Send {lbutton down}
        Random, lancer, 1800, 2000
        Sleep lancer
        Send {lbutton up}
    }
    else  
    {
        PixelSearch, Px, Py, 1, 0, 1915, 274, 0x9BDE00, 3, Fast ; Cherche la couleur verte dans un rectangle défini
        if (ErrorLevel = 0){
            While(Fishing = 0)
            {
                PixelSearch, Px, Py, 571, 601, 1364, 872, 0xD7B088, 4, Fast ; Cherche la couleur bleue dans un rectangle défini
                if(ErrorLevel = 0)
                {
                    Send {lbutton down}
                    Send {lbutton up}
                    Send {lbutton down}
                    Send {lbutton up}
                    Send {lbutton down}
                    Send {lbutton up}
                    Send {lbutton down}
                    Send {lbutton up}
                     
                    Send {lbutton down}
                    Sleep, 200
                    Send {lbutton up}
                     
                    Send {lbutton down}
                    Sleep, 200
                    Send {lbutton up}
                     
                    Send {lbutton down}
                    Sleep, 200
                    Send {lbutton up}
                     
                    Send {lbutton down}
                    Sleep, 200
                    Send {lbutton up}
                     
                    Send {lbutton down}
                    Sleep, 200
                    Send {lbutton up}
                     
                    Sleep, 4500
                     
                    Send {lbutton down}
                    Random, lancer, 1800, 2000
                    Sleep lancer
                    Send {lbutton up}
                     
                    Fishing := 1
                    Durability -= 10
                }
                else 
                 {
                    Send {lbutton down} ; Laisse la souris appuyée

                    if(iTirer < tirer)
                    { 
                    Sleep 100
                    iTirer +=100
                else 
                 {
                Send {lbutton down} ; Laisse la souris appuyée
                 
                if(iTirer < tirer)
                { 
                Sleep 100
                iTirer +=100
                }
            else  
            {
            isTiring=1
            } 
        if(isTiring=1)
        { 
        Send {lbutton up} ; Relache la souris
        if(iPause < pause)
        { 
        Sleep 100
        iPause +=100
        }
    else  
    {
    isTiring=0
    iTirer=0
    iPause=0
} } } } } } } 
 
^1::
MouseGetPos MouseX, MouseY
MsgBox %MouseX%, %MouseY%
